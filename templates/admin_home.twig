{% import "modal_destroy.twig" as modal_destroy %}
{% extends 'layout.twig' %}
{% block title %}CoZ Crash Reports{% endblock %}
{% block content %}
  {% for product, versions in data %}
    {% for version, reports in versions %}
      <h3>{{ product }} - {{ version }}</h3>
      <p><em>{{ reports | length }} crash(es) on record for this version.</em></p>
      <div class="table-responsive">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th>Date</th>
              <th>GUID</th>
              <th>RVA</th>
              <th><i class="fas fa-trash-alt"></i></th>
              <th><i class="fas fa-file-download"></i></th>
            </tr>
          </thead>
          <tbody>
            {% for report in reports %}
              <tr id="report-row-{{ report.id }}" class="report-row" data-has-email="{{ report.hasEmail ? "true" : "false" }}" data-has-user-comment="{{ report.hasUserComment ? "true" : "false" }}" data-has-admin-comment="{{ report.hasAdminComment ? "true" : "false" }}">
                <td>{{ report.date }}</td>
                <td>
                  <a href="{{ path_for('adminView', { 'id': report.id }) }}">{{ report.guid }}</a>
                  <div class="float-right">
                    <i class="email-icon fas fa-at"></i>
                    <i class="uc-icon fas fa-comment"></i>
                    <i class="ac-icon fas fa-sticky-note"></i>
                  </div>
                </td>
                <td>{{ report.rva }}</td>
                <td><a href="#" role="button" data-guid="{{ report.guid }}" data-toggle="modal" data-target="#modal-destroy"><i class="fas fa-trash-alt"></i></a></td>
                <td><a href="{{ base_url() }}/uploads/{{ report.guid }}.zip"><i class="fas fa-file-download"></i>&emsp;({{ report.filesize }})</a></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endfor %}
    <hr>
  {% endfor %}
{% endblock %}
{% block modals %}
  {{ modal_destroy.modal('adminDestroy', false) }}
{% endblock %}